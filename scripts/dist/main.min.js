var FunctionBox={};FunctionBox.clearContent=function(){for(var e=0,t=arguments.length;e<t;e++)"string"==typeof arguments[e]?document.getElementById(arguments[0]).innerHTML="":arguments[0].innerHTML=""},FunctionBox.initializeClock=function(e,t){function n(){var e=o(t);i.innerHTML=("0"+e.minutes).slice(-2),a.innerHTML=("0"+e.seconds).slice(-2),e.total<=0&&(clearInterval(givenTime),document.getElementById("question").innerHTML="На жаль, час вийшов...",setTimeout(function(){router.toRoute("scorecard")},2e3))}function o(e){var t=Date.parse(e)-Date.parse(new Date),n=Math.floor(t/1e3%60),o=Math.floor(t/1e3/60%60);return{total:t,minutes:o,seconds:n}}var r=document.getElementById(e),i=r.querySelector("#minutes"),a=r.querySelector("#seconds");n(),givenTime=setInterval(n,1e3)},FunctionBox.indicateCurrentLocation=function(){var e=document.querySelector(".menu__item-active");e&&(e.className="menu__item");var t=window.location.hash,n=t.split("/")[1];switch(n){case"":case"quiz":case"enter":case"edit":document.querySelector('a[href="#!/'+n+'"]').parentElement.className="menu__item menu__item-active";break;case"userstats":document.getElementById("user-stats").className+=" menu__item-active";break;default:return}},FunctionBox.renderBreadcrumbs=function(e){var t=document.getElementById("breadcrumbs"),n=document.querySelector(".container");if(3!=e.length){var o=e.split("/");t||(t=document.createElement("div"),t.id="breadcrumbs",t.className="breadcrumbs",n.insertBefore(t,mountingPoint)),t.innerHTML="";e:for(var r=0,i=o.length;r<i;r++){var a=document.createElement("a");switch(a.className="link breadcrumb",o[r]){case"#!":a.href=o[r]+router.reverse("home"),o[r]="Головна";break;case"quiz":a.href="#!"+router.reverse("quiz"),o[r]="Вибір теста";break;case"kyiv":case"kharkiv":if(r==i-1)break e;a.href="#!"+router.reverse("concrete-quiz",{set:o[r],number:o[r+1],id:o[r+2]}),o[r]=("kyiv"==o[r]?"АВ Київ №":"AB Харків №")+o[r+1],t.appendChild(a);break e;case"scorecard":o[r]="Результат проходження";break;case"enter":o[r]="Форма входу";break;case"userstats":o[r]="Моя статистика";break;case"search":o[r]="Пошук теста";break;case"edit":o[r]="Редагувати тести";break e;default:t&&t.parentElement.removeChild(t)}t.appendChild(a)}var s=t.children;for(r=0,i=s.length;r<i;r++)s[r].innerHTML=o[r]}else t&&n.removeChild(t)},FunctionBox.renderEnterLinkTitle=function(){var e=document.getElementById("enter-link");window.sessionStorage.length?e.innerHTML="Вийти":window.localStorage.length?e.innerHTML="Увійти":e.innerHTML="Реєстрація"},FunctionBox.renderMenuAndFooter=function(e){document.getElementById("menu"),document.getElementById("footer");window.navigator.appName.indexOf("Internet Explorer")==-1&&(e=!e,document.getElementById("menu").hidden=e,document.getElementById("footer").hidden=e)},FunctionBox.stickFooter=function(){var e=document.getElementById("footer");e.style.top="0";var t=window.innerHeight-e.offsetTop;t>e.offsetHeight&&(e.style.top=t-e.offsetHeight+"px")},FunctionBox.attachSearchListener=function(){var e=document.querySelector(".input-text");e.addEventListener("keypress",function(e){13==e.keyCode&&router.toRoute("search")}),e.addEventListener("focus",function(e){this.value=""}),document.getElementById("search-link").addEventListener("click",function(){router.toRoute("search")})},FunctionBox.changeSlide=function(){var e=document.querySelectorAll(".slide");e[0].hasAttribute("hidden")?(e[1].setAttribute("hidden",!0),e[0].removeAttribute("hidden")):(e[0].setAttribute("hidden",!0),e[1].removeAttribute("hidden"))},FunctionBox.renderCarousel=function(){var e=document.createElement("div");e.className="carousel";for(var t=0;t<2;t++){var n=document.createElement("div");n.className="slide fade",!!t&&n.setAttribute("hidden",!0);var o=document.createElement("a");o.href="#!/quiz/"+(t?"kharkiv":"kyiv"),o.className="slide_"+(t?"kharkiv":"kyiv"),o.style.width=mountingPoint.clientWidth+"px",o.style.height=mountingPoint.clientWidth/2+"px",n.appendChild(o),e.appendChild(n)}for(t=0;t<2;t++){var r=document.createElement("button");r.setAttribute("type","button"),r.innerHTML="&#1009"+(t?5:4)+";",r.className=t?"next":"prev",r.style.marginTop="-"+mountingPoint.clientWidth/4+"px",r.setAttribute("onclick","FunctionBox.changeSlide()"),e.appendChild(r)}document.getElementById("mounting-point").appendChild(e)},FunctionBox.renderInfo=function(){function e(){for(var e="",t=0;t<5;t++)e+='<p class="home-page-paragraph">Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts. Separated they live in Bookmarksgrove right at the coast of the Semantics, a large language ocean. A small river named Duden flows by their place and supplies it with the necessary regelialia. It is a paradisematic country, in which roasted parts of sentences fly into your mouth. Even the all-powerful Pointing has no control about the blind texts it is an almost unorthographic life One day however a small line of blind text by the name of Lorem Ipsum decided to leave for the far World of Grammar. The Big Oxmox advised her not to do so, because there were thousands of bad Commas, wild Question Marks and devious Semikoli, but the Little Blind Text didn’t listen. She packed her seven versalia, put her initial into the belt and made herself on the way. When she reached the first hills of the Italic Mountains, she had a last view back on the skyline of her hometown Bookmarksgrove, the headline of Alphabet Village and the subline of her own road, the Line Lane. Pityful a rethoric question ran over her cheek, then she continued her way.</p>';return e}mountingPoint.innerHTML+='<h1 class="promo">Тести з правил дорожнього руху України</h1>'+e()},FunctionBox.attachSelectorHandlers=function(){for(var e=document.getElementsByName("set"),t=document.getElementById("quiz-selector"),n=document.getElementById("options-container"),o=location.hash.slice(location.hash.lastIndexOf("/")+1),r=0,i=n.children.length;r<i;r++)"BUTTON"==n.children[r].tagName&&(n.children[r].disabled=!0);t.disabled=!0,n.style.opacity="0.5";for(var r=0,i=e.length;r<i;r++)e[r].addEventListener("click",function(e){if("1"!==n.style.opacity){for(var r=0,i=n.children.length;r<i;r++)"BUTTON"==n.children[r].tagName&&(n.children[r].disabled=!1);t.disabled=!1,n.style.opacity="1";var a=document.createElement("a");a.innerHTML="quiz"==o?"Почати тест":"Редагувати",a.id="start",a.className="button",n.replaceChild(a,document.getElementById("tempor"))}FunctionBox.clearContent(t);var s=document.getElementById("start");if("kyiv"==e.target.value){for(var r=1;r<=110;r++){var u=document.createElement("option");u.innerHTML="AB Київ №"+r,t.appendChild(u)}s.href="#!"+("quiz"==o?"/quiz":"/edit")+"/kyiv/"+(t.selectedIndex+1)+"/1"}else{for(var r=1;r<=80;r++){var u=document.createElement("option");u.innerHTML="AB Харків №"+r,t.appendChild(u)}s.href="#!"+("quiz"==o?"/quiz":"/edit")+"/kharkiv/"+(t.selectedIndex+1)+"/1"}});document.getElementById("prev-quiz").addEventListener("click",function(){var n=t.selectedIndex;0!=n&&(t[n].selected=!1,t[n-1].selected=!0,document.getElementById("start").href="#!/quiz/"+(e[0].checked?"kyiv/":"kharkiv/")+(t.selectedIndex+1)+"/1")}),document.getElementById("next-quiz").addEventListener("click",function(){var n=t.selectedIndex;n!=t.length-1&&(t[n].selected=!1,t[n+1].selected=!0,document.getElementById("start").href="#!/quiz/"+(e[0].checked?"kyiv/":"kharkiv/")+(t.selectedIndex+1)+"/1")}),document.getElementById("random-quiz")&&document.getElementById("random-quiz").addEventListener("click",function(){var n=Math.floor(Math.random()*(e[0].checked?110:80));t[t.selectedIndex].selected=!1,t[n].selected=!0,document.getElementById("start").href="#!/quiz/"+(e[0].checked?"kyiv/":"kharkiv/")+(t.selectedIndex+1)+"/1"}),t.onchange=function(){document.getElementById("start").href="#!/quiz/"+(e[0].checked?"kyiv/":"kharkiv/")+(this.selectedIndex+1)+"/1"}},FunctionBox.countAnswers=function(){for(var e=0,t=0,n=null,o=1;o<=20;o++)userAnswers[o]&&(userAnswers[o].isCorrect?e++:t++);n=19-document.getElementById("minutes").innerHTML+":"+(60-document.getElementById("seconds").innerHTML),1==n.indexOf(":")&&(n="0"+n,4==n.length&&(n=n.replace(":",":0"))),userAnswers[0]={correct:e,incorrect:t,total:20,time:n}},FunctionBox.indicateCurrentQuestion=function(){for(var e=window.location.hash.slice(window.location.hash.lastIndexOf("/")+1),t=document.getElementById("questions-list").children,n=0,o=t.length;n<o;n++){var r=t[n].children[0].className;/current/.test(r)&&(t[n].children[0].className="questions-list__link")}t[e-1].children[0].className="questions-list__link current"},FunctionBox.insertCheckButton=function(e){document.getElementById("options").addEventListener("click",function(e){var t=document.getElementById("question");if("radio"==e.target.type&&!t.children.checkButton){var n=document.createElement("button");n.setAttribute("type","button"),n.className="button button_check",n.id="checkButton",n.innerHTML="Відповісти",n.addEventListener("click",FunctionBox.markQuestion),n.addEventListener("click",FunctionBox.recordUserAnswer),n.addEventListener("click",FunctionBox.stopQuiz),n.addEventListener("click",FunctionBox.proceedToNextQuestion),document.getElementById("question").insertBefore(n,document.getElementById("skipButton"))}})},FunctionBox.markQuestion=function(){for(var e=document.querySelectorAll(".custom-radio"),t=document.querySelectorAll(".input-radio"),n=0,o=t.length;n<o;n++){var r=t[n];if(r.checked){var i=document.querySelectorAll(".questions-list__item")[r.name-1];r.value==quiz[r.name-1].correctAnswer?(i.className+=" right_bg",e[n].className+=" right_text"):(i.className+=" wrong_bg",e[n].className+=" wrong_text",e[quiz[r.name-1].correctAnswer].className+=" right_text");for(var n=0,o=t.length;n<o;n++)t[n].disabled=!0;break}}},FunctionBox.markOptions=function(e){if(e in userAnswers){var t=userAnswers[e],n=document.querySelectorAll(".custom-radio");t.isCorrect?n[t.userAnswer].className+=" right_text":(n[t.userAnswer].className+=" wrong_text",n[t.correctAnswer].className+=" right_text");for(var o=document.querySelectorAll(".input-radio"),r=0,i=o.length;r<i;r++)o[r].disabled=!0}else FunctionBox.insertCheckButton()},FunctionBox.proceedToNextQuestion=function(){var e=window.location.hash.split("/").slice(1);"quiz"==e[0]?e[3]<20&&router.toRoute("concrete-quiz",{set:e[1],number:e[2],id:+e[3]+1}):e[3]<20&&router.toRoute("edit-quiz",{set:e[1],number:e[2],id:+e[3]+1})},FunctionBox.renderQuiz=function(e,t,n){var o=new XMLHttpRequest;o.open("GET","scripts/database/"+e+"/"+t+".json"),o.onreadystatechange=function(){4==o.readyState&&200==o.status?(quiz=JSON.parse(o.responseText),mountingPoint.innerHTML=Templates.QuestionsList({router:router,quiz:quiz,set:e,number:t,timer:!0}),FunctionBox.initializeClock("timer",new Date(Date.parse(new Date)+12e5)),document.getElementById("question").innerHTML=Templates.Question({router:router,question:quiz[0]}),FunctionBox.indicateCurrentQuestion(),document.getElementById("skipButton").addEventListener("click",FunctionBox.proceedToNextQuestion),FunctionBox.insertCheckButton()):4==o.readyState&&404==o.status&&(mountingPoint.innerHTML=Templates.NotFound({isQuiz:!0}))},o.send()},FunctionBox.recordUserAnswer=function(){for(var e=null,t=document.querySelectorAll(".input-radio"),n=0,o=t.length;n<o;n++)if(t[n].checked){e=t[n];break}if(userAnswers[e.name]={question:e.name,userAnswer:e.value,correctAnswer:quiz[e.name-1].correctAnswer,isCorrect:e.value==quiz[e.name-1].correctAnswer},window.sessionStorage.length){for(var r in window.sessionStorage)if("length"!=r&&(!window.sessionStorage.hasOwnProperty||window.sessionStorage.hasOwnProperty(r)))var i=r;var a=JSON.parse(window.sessionStorage[i]),s=location.hash.split("/").slice(2,4).join("_");a[s]?a[s][e.name-1]=userAnswers[e.name]:a[s]=[userAnswers[e.name]],window.sessionStorage[i]=JSON.stringify(a),window.localStorage[i]=JSON.stringify(a)}},FunctionBox.selectSet=function(e){document.getElementsByName("set")["kyiv"==e?0:1].checked=!0;for(var t=document.getElementById("quiz-selector"),n=document.getElementById("options-container"),o=0,r=n.children.length;o<r;o++)"BUTTON"==n.children[o].tagName&&(n.children[o].disabled=!1);t.disabled=!1,n.style.opacity="1";var i=document.createElement("a");if(i.innerHTML="Почати тест",i.id="start",i.className="button",n.replaceChild(i,document.getElementById("tempor")),document.getElementById("start").addEventListener("click",function(){userAnswers=[]}),"kyiv"==e){for(var o=1;o<=110;o++){var a=document.createElement("option");a.innerHTML="AB Київ №"+o,t.appendChild(a)}document.getElementById("start").href="#!/quiz/kyiv/"+(t.selectedIndex+1)+"/1"}else{for(var o=1;o<=80;o++){var a=document.createElement("option");a.innerHTML="AB Харків №"+o,t.appendChild(a)}document.getElementById("start").href="#!/quiz/kharkiv/"+(t.selectedIndex+1)+"/1"}},FunctionBox.stopQuiz=function(){if(21==userAnswers.length){clearInterval(givenTime);for(var e=document.getElementById("question"),t=0;t<2;t++)e.removeChild(e.lastElementChild);var n=document.createElement("a");n.className="button",n.innerHTML="Переглянути результат",n.href="#!"+router.reverse("scorecard"),e.appendChild(n)}},FunctionBox.attachEnterHandlers=function(){for(var e=document.querySelectorAll("#email-field, #password-field"),t=0,n=e.length;t<n;t++)e[t].addEventListener("focus",function(){var e=document.querySelector(".alert");e&&this.parentElement.removeChild(e)});document.getElementById("enter-button").addEventListener("click",FunctionBox.enterInAccount),document.getElementById("reg-button").addEventListener("click",FunctionBox.createAccount),document.getElementById("delete-button").addEventListener("click",FunctionBox.deleteAccount),e[1].addEventListener("keypress",function(e){13==e.keyCode&&(document.getElementById("enter-button").className.indexOf("button_disabled")+1?FunctionBox.createAccount():FunctionBox.enterInAccount())})},FunctionBox.createAccount=function(){var e=/^\w+[\.+]?\w+@[\w\-]+\.[A-Za-z]{2,}$/,t=document.querySelector(".form"),n=document.getElementById("email-field"),o=document.getElementById("password-field"),r=document.getElementById("alert"),i=e.test(n.value);if(o.value||r||FunctionBox.showAlert(o),i&&o.value){var r=document.getElementById("alert");r&&t.removeChild(r),localStorage[n.value]=JSON.stringify({password:o.value}),t.innerHTML="Ви успішно зареєстровані",setTimeout(function(){router.toRoute("home")},1e3)}else i||r||FunctionBox.showAlert(n)},FunctionBox.deleteAccount=function(){var e=document.getElementById("email-field"),t=document.getElementById("password-field");for(var n in localStorage)n==e.value&&JSON.parse(localStorage[n]).password==t.value?(localStorage.removeItem(n),mountingPoint.innerHTML="Ваш аккаунт успішно видалено",setTimeout(function(){router.toRoute("home")},1e3)):document.getElementById("alert-delete")||FunctionBox.showAlert(document.getElementById("delete-button"))},FunctionBox.enterInAccount=function(){var e=document.getElementById("email-field"),t=document.getElementById("password-field");for(var n in localStorage)n==e.value&&JSON.parse(localStorage[n]).password==t.value?(sessionStorage[n]=localStorage[n],document.querySelector(".form").innerHTML="Ви успішно ввійшли на сайт",setTimeout(function(){router.toRoute("home")},1e3),FunctionBox.insertUserStatsLink()):document.getElementById("alert")||(n!=e.value?FunctionBox.showAlert(e):FunctionBox.showAlert(t))},FunctionBox.showAlert=function(e){document.querySelector(".form").style.position="relative";var t=document.createElement("span");t.className="alert",t.style.left=e.offsetLeft+"px",t.style.top=e.offsetTop+e.offsetHeight+"px";var n=null;"email-field"==e.id?(n=e.value?"Введено неправильну адресу електронної пошти":'Поле "Електронна пошта" не повинно бути пустим',t.innerHTML=n,e.parentElement.appendChild(t)):"delete-button"==e.id?(n="Не вдалося видалити аккаунт. Перевірте введені дані",t.id="alert-delete",t.innerHTML=n,e.parentElement.appendChild(t)):(n=e.value?"Невірний пароль":'Поле "Пароль" не повинно бути пустим',t.innerHTML=n,e.parentElement.appendChild(t))},FunctionBox.insertUserStatsLink=function(){var e=document.createElement("li");e.id="user-stats",e.className="link menu__item",e.innerHTML="Моя статистика",e.addEventListener("mouseenter",function(){if(!this.children.length){var e=document.createElement("ul");e.className="menu-stats",e.style.position="absolute",e.style.zIndex=10;for(var t=0;t<2;t++){var n=document.createElement("li");n.className="menu__item-stats";var o=document.createElement("a");o.innerHTML=t?"АВ Харків 14-те видання":"AB Київ 5-те видання",o.href=t?"#!/userstats/kharkiv":"#!/userstats/kyiv",o.className="link",n.appendChild(o),e.appendChild(n)}this.appendChild(e)}}),e.addEventListener("mouseleave",function(e){e.target.removeChild(e.target.children[0])});var t=document.getElementById("menu");t.insertBefore(e,t.children[2])},FunctionBox.countTotal=function(e){var t={};return t.quizes=e.reduce(function(e,t){return e+t.length==20?1:0},0),t.questions=e.reduce(function(e,t){return e+t.reduce(function(e,t){return e+(null!=t?1:0)},0)},0),t.correct=e.reduce(function(e,t){return e+t.reduce(function(e,t){return e+(t?1:0)},0)},0),t.incorrect=e.reduce(function(e,t){return e+t.reduce(function(e,t){return e+(0==t?1:0)},0)},0),t},FunctionBox.prepareUserStats=function(e){var t=[];for(var n in window.sessionStorage)if("length"!=n&&(!window.sessionStorage.hasOwnProperty||window.sessionStorage.hasOwnProperty(n)))var o=JSON.parse(window.localStorage[n]);for(var r in o)r.indexOf(e)==-1?delete o[r]:t[r.slice(r.indexOf("_")+1)-1]=o[r].map(function(e){return e?e.isCorrect:e});return t},FunctionBox.prepareUserTime=function(e){for(var t in window.sessionStorage)if("length"!=t&&(!window.sessionStorage.hasOwnProperty||window.sessionStorage.hasOwnProperty(t)))var n=JSON.parse(window.localStorage[t]);for(var o in n)if(o==e+"_time"){var r=n[o].reduce(function(e,t){return e+(null!=t?t:0)},0),i=n[o].reduce(function(e,t){return e+(null!=t?1:0)},0),a=r/i,s=new Date(a);return s.getMinutes()+":"+s.getSeconds()}},FunctionBox.recordTime=function(e){var t=60*parseInt(e.slice(0,2))*1e3,n=1e3*parseInt(e.slice(3)),e=null;e=t?t+n:n;for(var o in window.sessionStorage)if("length"!=o&&(!window.sessionStorage.hasOwnProperty||window.sessionStorage.hasOwnProperty(o)))var r=o;if(window.sessionStorage.length){var i=JSON.parse(window.sessionStorage[r]),a=document.querySelector('a[href*="quiz/"]').href.split("/"),s=a[5]+"_time";i[s]?i[s][a[6]-1]=e:(i[s]=[],i[s][a[6]-1]=e),window.sessionStorage[r]=JSON.stringify(i),window.localStorage[r]=JSON.stringify(i)}},FunctionBox.findTest=function(){for(var e=document.getElementById("search-field"),t=e.value.toLowerCase().replace("a","а").replace("b","в"),n=[],o=1;o<=110;o++){var r={};if(r.title="АВ Київ №"+o,r.set="kyiv",r.number=o,n.push(r),o<=80){var i={};i.title="АВ Харків №"+o,i.set="kharkiv",i.number=o,n.push(i)}}var a=n.filter(function(e){if(""!=t)return!!(e.title.split(" ").join("").toLowerCase().replace("№","").indexOf(t)+1)});return a},FunctionBox.toggleEditLink=function(){var e=document.getElementById("menu"),t=document.getElementById("edit");if(!t){!window.sessionStorage.length&&t&&e.removeChild(t.parentElement);for(var n in window.sessionStorage)if("length"!=n&&(!window.sessionStorage.hasOwnProperty||window.sessionStorage.hasOwnProperty(n)))var o=n;if("sandrokharchenko@gmail.com"==o&&"0pen$e$@me"==JSON.parse(sessionStorage[o]).password){var r=document.createElement("a");r.innerHTML="Редагувати тести",r.id="edit",r.href="#!/edit",r.className="link";var i=document.createElement("li");i.className="menu__item",i.appendChild(r);var e=document.getElementById("menu");e.insertBefore(i,e.children[3])}}},FunctionBox.renderQuizEditor=function(e,t,n){var o=new XMLHttpRequest;o.open("GET","scripts/database/"+e+"/"+t+".json"),o.onreadystatechange=function(){4==o.readyState&&200==o.status?(quiz=JSON.parse(o.responseText),mountingPoint.innerHTML=Templates.QuestionsList({router:router,quiz:quiz,set:e,number:t,timer:!1}),document.getElementById("question").innerHTML=Templates.EditForm({router:router,question:quiz[0]}),FunctionBox.indicateCurrentQuestion(),document.getElementById("save-button").addEventListener("click",FunctionBox.saveChanges)):4==o.readyState&&alert(o.status+": "+o.statusText)},o.send()},FunctionBox.saveChanges=function(){var e={},t=window.location.hash.split("/");e.set=t[2],e.id=t[3],e.question=document.getElementById("question-field").value,e.answers=[];for(var n=document.getElementsByName("answer-field"),o=0,r=n.length;o<r;o++)e.answers.push(n[o].value);var i=document.getElementsByName("correct");for(o=0,r=i.length;o<r;o++)if(i[o].checked){e.correctAnswer=o;break}var a=new XMLHttpRequest;a.open("POST","../server.js"),a.onreadystatechange=function(){4==a.readyState&&200==a.status?(alert(a.responseText),FunctionBox.proceedToNextQuestion()):4==a.readyState&&alert("Сталася помилка\nДані не збережено")},a.send(JSON.stringify(e))};var router=new Router,mountingPoint=document.getElementById("mounting-point"),userAnswers=[],quiz=null,givenTime=null;router.route("home","/",function(){FunctionBox.renderMenuAndFooter(!0),FunctionBox.clearContent(mountingPoint),FunctionBox.renderEnterLinkTitle(),FunctionBox.renderCarousel(),FunctionBox.renderInfo(),window.sessionStorage.length&&!document.getElementById("user-stats")&&FunctionBox.insertUserStatsLink(),FunctionBox.attachSearchListener(),FunctionBox.toggleEditLink()}),router.route("quiz","/quiz",function(){mountingPoint.innerHTML=Templates.Selector({randomButton:!0}),FunctionBox.attachSelectorHandlers()}),router.route("quiz-preset","/quiz/:set",function(e){mountingPoint.innerHTML=Templates.Selector({randomButton:!0}),FunctionBox.attachSelectorHandlers(),FunctionBox.selectSet(e)}),router.route("concrete-quiz","/quiz/:set/:number/:id",function(e,t,n){var o=document.getElementById("question");n>1||o?(o.innerHTML=Templates.Question({router:router,question:quiz[n-1]}),FunctionBox.indicateCurrentQuestion(),document.getElementById("skipButton").addEventListener("click",FunctionBox.proceedToNextQuestion),FunctionBox.markOptions(n)):FunctionBox.renderQuiz(e,t,n)}),router.route("scorecard","/scorecard",function(){FunctionBox.countAnswers(),document.getElementById("question").innerHTML=Templates.Scorecard({router:router,userAnswers:userAnswers[0]}),FunctionBox.recordTime(userAnswers[0].time)}),router.route("enter","/enter",function(){sessionStorage.length?(sessionStorage.clear(),FunctionBox.toggleEditLink(),mountingPoint.innerHTML="Ви вийшли з аккаунту",document.getElementById("menu").removeChild(document.getElementById("user-stats")),setTimeout(function(){router.toRoute("home")},2e3)):(mountingPoint.innerHTML=Templates.EnterForm({router:router}),FunctionBox.attachEnterHandlers())}),router.route("user-stats","/userstats/:set",function(e){var t=FunctionBox.prepareUserTime(e),n=FunctionBox.prepareUserStats(e);mountingPoint.innerHTML=Templates.UserStats({router:router,set:e,userData:n,time:t,total:FunctionBox.countTotal(n)})}),router.route("search","/search",function(){mountingPoint.innerHTML=Templates.SearchResult({router:router,results:FunctionBox.findTest()})}),router.route("edit-selector","/edit",function(){mountingPoint.innerHTML=Templates.Selector({randomButton:!1}),FunctionBox.attachSelectorHandlers()}),router.route("edit-quiz","/edit/:set/:number/:id",function(e,t,n){n>1||document.getElementById("question")?(document.getElementById("question").innerHTML=Templates.EditForm({router:router,question:quiz[n-1]}),FunctionBox.indicateCurrentQuestion(),document.getElementById("save-button").addEventListener("click",FunctionBox.saveChanges)):FunctionBox.renderQuizEditor(e,t,n)}),router.notFound(function(){FunctionBox.renderMenuAndFooter(!1),mountingPoint.innerHTML=Templates.NotFound({isQuiz:!1})}),router.toRoute("home"),window.addEventListener("hashchange",function(){var e=location.hash;router.toPath(e.slice(2)),FunctionBox.renderEnterLinkTitle(),FunctionBox.renderBreadcrumbs(e),FunctionBox.indicateCurrentLocation(),setTimeout(function(){FunctionBox.stickFooter()},32)},!1);